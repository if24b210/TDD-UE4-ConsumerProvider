<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Places in Vienna</title>
    <meta name="creator" content="FH - ITP Austria and Thailand">
    <meta name="programmer" content="Neda Stefanovic, if24b210">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 600px; }
    </style>
</head>
<body>
    <h1>Öffentlich zugängliche Grünflächen in Wien</h1>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>

        // Initialisiere die Karte
        const map = L.map('map').setView([48.2082, 16.3738], 13); // Wien Zentrum

        // TILE Layer: füge zu einen OpenStreetMap 
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);


        // Open Data - Daten laden: die GeoJSON-Daten über die API
        fetch('https://www.data.gv.at/katalog/api/3/action/package_show?id=d0145df8-7f6d-46e1-9bc6-ee7897054104')
            .then(response => response.json())
            .then(data => {
                // Extrahiere die URL der GeoJSON-Datei aus den Ressourcen
                const geojsonUrl = data.result.resources.find(r => r.format === "GeoJSON").url;

                // Lade die GeoJSON-Daten
                fetch(geojsonUrl)
                    .then(response => response.json())
                    .then(geojsonData => {
                        // Füge die GeoJSON-Daten zur Karte hinzu
                        L.geoJSON(geojsonData).addTo(map);
                    });
            })
            .catch(error => console.error('Fehler beim Laden der Daten:', error));
    </script>
</body>
</html>
